server {
  listen      80;
  server_name charlestonjs.com www.charlestonjs.com;
  index       index.html;
  root        /var/www/charlestonjs;

  location / {
    try_files $uri$args $uri$args/ /index.html;
  }

  # serve app
  location ~ /(styles|images|fonts)/(.*)/ {
    expires max;
  }

  # serve api
  location ~ /api/v1/(.*) {
    include /etc/nginx/proxy_params;
    proxy_set_header    X-Nginx-Proxy true;
    proxy_http_version  1.1;
    proxy_pass          http://nodejs_api;
  }
}
